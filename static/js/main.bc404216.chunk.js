(this["webpackJsonpbooks-kiosk"]=this["webpackJsonpbooks-kiosk"]||[]).push([[0],{31:function(e,t,a){e.exports=a.p+"static/media/NoImage.a06c99c1.png"},39:function(e,t,a){e.exports=a.p+"static/media/logo.987cc879.svg"},48:function(e,t,a){e.exports=a(63)},53:function(e,t,a){},60:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"required",(function(){return B})),a.d(n,"date",(function(){return S})),a.d(n,"text",(function(){return I})),a.d(n,"composeValidators",(function(){return L}));var r={};a.r(r),a.d(r,"books",(function(){return me}));var o=a(0),i=a.n(o),l=a(6),c=a.n(l),u=(a(53),a(23));var d=function(){return i.a.createElement("nav",{className:"navbar navbar-expand-lg fixed-top navbar-dark bg-dark"},i.a.createElement("a",{className:"navbar-brand mr-auto mr-lg-0",href:"."},"Books Kiosk"))},s=a(39),m=a.n(s);var f=function(e){var t=e.children;return(i.a.createElement("main",{role:"main",className:"container"},i.a.createElement("div",{className:"d-flex align-items-center p-3 my-3 text-white-50 bg-primary rounded shadow-sm"},i.a.createElement("img",{className:"mr-3",src:m.a,alt:"",width:"48",height:"48"}),i.a.createElement("div",{className:"lh-100"},i.a.createElement("h5",{className:"mb-0 text-white lh-100"},"Books"))),t))},v=a(10),b=a(16),h=a(67),E=a(68);var p=function(e){var t=e.children;return(i.a.createElement("div",{className:"d-block text-right mt-3"},t))};function k(e){var t=e.children;return(i.a.createElement("div",{className:"my-3 p-3 bg-white rounded shadow-sm"},t))}k.Footer=p;var g=k,y=a(12),j=function(e){return e.replace(/[^a-zA-Z\s]+/g,"").replace(/\s+/g," ").trim().toLowerCase().split(" ").map((function(e){return e.replace(e.charAt(0),e.charAt(0).toUpperCase())})).join(" ")},O=a(31),C=a.n(O);function w(e){var t=e.book,a=e.onEdit,n=e.onDelete,r=Object(o.useCallback)((function(){a(t)}),[t,a]),l=Object(o.useCallback)((function(){n(t)}),[t,n]),c=Object(o.useCallback)((function(e){e.target.src=C.a}),[]);return i.a.createElement("div",{className:"media text-muted pb-3 mb-3 border-bottom"},i.a.createElement("img",{className:"bd-placeholder-img mr-2 rounded",src:t.image||C.a,alt:t.title,style:{width:"80px"},onError:c}),i.a.createElement("div",{className:"media-body pb-3 mb-0 small lh-125 border-gray"},i.a.createElement("div",{className:"d-flex justify-content-between"},i.a.createElement("div",null,i.a.createElement("h6",{className:"mb-0"},j(t.title)),i.a.createElement("strong",{className:"d-block text-gray-dark"},t.author),i.a.createElement("small",null,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-LL-dd";return y.DateTime.fromFormat(e,t).toFormat("LL/dd/yyyy")}(t.date))),i.a.createElement("div",{style:{whiteSpace:"nowrap"}},i.a.createElement(E.a,{variant:"link",size:"sm",onClick:r},"Edit"),"|",i.a.createElement(E.a,{variant:"link danger",size:"sm",onClick:l},"Delete")))))}w.defaultProps={onEdit:function(){},onDelete:function(){}};var x=w;function F(e){var t=e.books,a=e.onAdd,n=e.onEdit,r=e.onDelete;return(i.a.createElement(g,null,t.map((function(e){return i.a.createElement(x,{key:e.id,book:e,onEdit:n,onDelete:r})})),!t.length&&i.a.createElement("div",null,"Your kiosk is empty. Please add a book."),i.a.createElement(g.Footer,null,i.a.createElement(E.a,{variant:"link",size:"sm",onClick:a},"Add Book"))))}F.defaultProps={onAdd:function(){},onEdit:function(){},onDelete:function(){}};var D=F,T=a(66),N={REQUIRED:"This field can't be empty.",TEXT:"This field should have correct text.",DATE:"This field is not valid date."};function B(e){return e?void 0:N.REQUIRED}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"yyyy-LL-dd";return function(t){return t&&!y.DateTime.fromFormat(t,e).isValid?N.DATE:void 0}}function I(e){if(!e||e&&!e.match(/[a-zA-Z]+/g))return N.TEXT}var L=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){for(var a=[],n=0;n<t.length;n+=1){var r=t[n](e);r&&a.push(r)}return a.length?a:void 0}},A=a(24),V=a(8),P=Object(o.memo)((function(e){return i.a.createElement(V.a.Control,e)})),z=a(25),q=a(41),Y=a.n(q),R=function(e){var t=e.value,a=e.dateFormat,n=e.onChange,r=Object(z.a)(e,["value","dateFormat","onChange"]),l=Object(o.useMemo)((function(){var e=y.DateTime.fromFormat(t||"","yyyy-LL-dd");return e.isValid?e.toFormat(a):t}),[t,a]);return i.a.createElement(Y.a,Object.assign({},r,{mask:"99/99/9999",value:l,onChange:function(e){var t=e.target.value,r=y.DateTime.fromFormat(t,a);r.isValid?n(r.toFormat("yyyy-LL-dd")):n(t)}}),(function(e){return i.a.createElement(V.a.Control,Object.assign({},e,{value:l}))}))};R.defaultProps={value:""};var _=Object(o.memo)(R),H=function(e){var t=e.active,a=e.visited,n=e.invalid;return(e.submitFailed||a)&&!t&&n},M=function(e){var t=e.name,a=e.label,n=e.helpText,r=e.validate,o=e.control,l=e.controlId,c=e.placeholder,u=e.dateFormat,d=e.validateFields,s={placeholder:c};return u&&Object.assign(s,{dateFormat:u}),i.a.createElement(A.a,{name:t,validate:r,validateFields:d},(function(e){var t=e.input,r=e.meta,c=r.error,u=r.submitError,d=!(r.dirtySinceLastSubmit||!u),m=!(d||!H(r)||!c);return i.a.createElement(V.a.Group,{controlId:l},!!a&&i.a.createElement(V.a.Label,null,a),i.a.createElement(o,Object.assign({isInvalid:m||d},t,s)),!!n&&r.active&&i.a.createElement(V.a.Text,null,n),!!d&&i.a.createElement(V.a.Control.Feedback,{type:"invalid"},u),!!m&&i.a.createElement(V.a.Control.Feedback,{type:"invalid"},function(e){return e?"string"===typeof e||e instanceof String?e:e[0]:""}(c)))}))};M.defaultProps={validate:function(){},control:P,label:void 0,helpText:void 0,placeholder:void 0,dateFormat:void 0,validateFields:void 0};var U=M;function J(e){var t=e.onSubmit,a=e.validate,n=void 0===a?function(){return{}}:a,r=e.initialValues,o=e.formId,l=e.children;return(i.a.createElement(A.b,{onSubmit:t,validate:n,initialValues:r,render:function(e){var t=e.handleSubmit,a=e.invalid,n=Object(z.a)(e,["handleSubmit","invalid"]);return(i.a.createElement(V.a,{onSubmit:t,noValidate:!0,id:o},l(Object(v.a)({},n,{invalid:a}))))}}))}J.defaultProps={validate:function(){},initialValues:void 0,formId:void 0};var Q=J,W={title:n.composeValidators(n.required,n.text),author:n.composeValidators(n.required,n.text),date:n.composeValidators(n.required,n.date())};function X(e){var t=e.show,a=e.data,n=e.onClose,r=e.onSubmit,l=e.validate,c=Object(o.useCallback)((function(e){return r(Object(v.a)({},a,{},e))}),[a,r]);return i.a.createElement(T.a,{show:t,onHide:n},i.a.createElement(T.a.Header,{closeButton:!0},i.a.createElement(T.a.Title,null,a?"Edit Book":"Add Book")),i.a.createElement(Q,{onSubmit:c,initialValues:a,validate:l},(function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(T.a.Body,null,i.a.createElement(U,{name:"title",label:"Title",placeholder:"Enter book name.",validate:W.title,controlId:"id_title"}),i.a.createElement(U,{name:"author",label:"Author",placeholder:"Enter author name.",validate:W.author,controlId:"id_author"}),i.a.createElement(U,{name:"date",label:"Date",placeholder:"MM/DD/YYYY",validate:W.date,controlId:"id_date",control:_,dateFormat:"LL/dd/yyyy"}),i.a.createElement(U,{name:"image",label:"Image",placeholder:"Image http(s) path.",controlId:"id_image"})),i.a.createElement(T.a.Footer,null,i.a.createElement(E.a,{variant:"secondary",onClick:n},"Close"),i.a.createElement(E.a,{variant:"primary",type:"submit"},"Save Changes")))})))}X.defaultProps={onClose:function(){},onSubmit:function(){},validate:function(){},show:!1,data:void 0};var Z=X,G=a(44);a(60);var K=function(){return i.a.createElement("div",{className:"loader"},i.a.createElement("div",{className:"loader-backdrop"}),i.a.createElement("div",{className:"loader-spinner"},i.a.createElement(G.a,{animation:"border",variant:"primary"})))};function $(e){var t=e.show,a=e.message,n=e.data,r=e.onClose,l=e.onDelete,c=Object(o.useCallback)((function(){l(n)}),[n,l]);return i.a.createElement(T.a,{size:"xs",show:t,onHide:r},i.a.createElement(T.a.Body,null,a),i.a.createElement(T.a.Footer,null,i.a.createElement(E.a,{variant:"secondary",onClick:r},"Cancel"),i.a.createElement(E.a,{variant:"danger",onClick:c},"Delete")))}$.defaultProps={onClose:function(){},onDelete:function(){},show:!1,message:"",data:null};var ee=$;var te=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(o.useState)(e),a=Object(b.a)(t,2),n=a[0],r=a[1],i=Object(o.useCallback)((function(){return r((function(e){return!e}))}),[]);return[n,i]};function ae(e){var t=e.books,a=e.loading,n=e.fetch,r=e.changeBook,l=e.deleteBook,c=te(!1),u=Object(b.a)(c,2),d=u[0],s=u[1],m=te(!1),f=Object(b.a)(m,2),h=f[0],E=f[1],p=Object(o.useState)(null),k=Object(b.a)(p,2),g=k[0],y=k[1],O=Object(o.useCallback)((function(){y(null),E()}),[E]),C=Object(o.useCallback)((function(e){y(e),E()}),[E]),w=Object(o.useCallback)((function(e){y(e),s()}),[s]),x=Object(o.useCallback)((function(e){y(null),l(e),s()}),[s,l]),F=Object(o.useCallback)((function(e){r(e),E()}),[E,r]),T=Object(o.useCallback)((function(e){var a=e.title;if(a)return function(e,t){if(e.filter((function(e){return e.id!==t.id})).map((function(e){return e.title})).includes(t.title))return{title:"Title should be unique."}}(t,Object(v.a)({},g,{title:a}))}),[g,t]);return Object(o.useEffect)((function(){n()}),[n]),a?i.a.createElement(K,null):i.a.createElement(i.a.Fragment,null,i.a.createElement(D,{books:t,onAdd:O,onEdit:C,onDelete:w}),i.a.createElement(Z,{data:g,show:h,onClose:E,onSubmit:F,validate:T}),i.a.createElement(ee,{data:g,message:i.a.createElement("span",null,"Do you want to delete\xa0",i.a.createElement("strong",null,'"',g&&j(g.title),'"'),"\xa0book?"),show:d,onClose:s,onDelete:x}))}ae.defaultProps={fetch:function(){},changeBook:function(){},deleteBook:function(){},books:[],loading:!1};var ne=Object(u.b)((function(e){return{books:e.books,loading:e.loading.models.books}}),(function(e){return{fetch:function(){return e.books.fetchBooks()},changeBook:function(t){t.id?e.books.edit(t):e.books.add(Object(v.a)({},t,{id:Object(h.a)()}))},deleteBook:function(t){e.books.delete(t)}}}))(ae),re=a(45),oe=a(46),ie=a.n(oe),le=a(15),ce=a.n(le),ue=a(22),de=a(19),se={fetch:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=Object(ue.a)(ce.a.mark((function e(t){var a;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){setTimeout((function(){e()}),500)}));case 2:return e.next=4,fetch("".concat("/books-kiosk").concat(t));case 4:return a=e.sent,e.abrupt("return",a.json());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())};var me={state:[],reducers:{init:function(e,t){return[].concat(Object(de.a)(e),Object(de.a)(t))},add:function(e,t){return[].concat(Object(de.a)(e),[t])},edit:function(e,t){var a=Object(de.a)(e),n=a.findIndex((function(e){var a=e.id;return t.id===a}));return a.splice(n,1,Object(v.a)({},a[n],{},t)),a},delete:function(e,t){return e.filter((function(e){return e.id!==t.id}))}},effects:function(){return{fetchBooks:function(){var e=this;return Object(ue.a)(ce.a.mark((function t(){var a;return ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,se.fetch("/books.json");case 2:a=t.sent,e.init(a);case 4:case"end":return t.stop()}}),t)})))()}}}},fe=ie()({}),ve=Object(re.init)({models:r,plugins:[fe]});var be=function(){return i.a.createElement(u.a,{store:ve},i.a.createElement(d,null),i.a.createElement(f,null,i.a.createElement(ne,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(be,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[48,1,2]]]);
//# sourceMappingURL=main.bc404216.chunk.js.map