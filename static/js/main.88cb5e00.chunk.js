(this["webpackJsonpbooks-kiosk"]=this["webpackJsonpbooks-kiosk"]||[]).push([[0],{31:function(e,a,t){e.exports=t.p+"static/media/logo.987cc879.svg"},38:function(e,a,t){e.exports=t(49)},43:function(e,a,t){},45:function(e,a,t){},49:function(e,a,t){"use strict";t.r(a);var n={};t.r(n),t.d(n,"required",(function(){return P})),t.d(n,"date",(function(){return H})),t.d(n,"composeValidators",(function(){return U}));var r=t(0),o=t.n(r),l=t(10),c=t.n(l);t(43);var i=function(){return o.a.createElement("nav",{className:"navbar navbar-expand-lg fixed-top navbar-dark bg-dark"},o.a.createElement("a",{className:"navbar-brand mr-auto mr-lg-0",href:"."},"Books Kiosk"),o.a.createElement("div",{className:"navbar-collapse offcanvas-collapse",id:"navbarsExampleDefault"},o.a.createElement("ul",{className:"navbar-nav mr-auto"},o.a.createElement("li",{className:"nav-item active"},o.a.createElement("a",{className:"nav-link",href:"."},"Dashboard")))))},u=t(31),d=t.n(u);var s=function(e){var a=e.children;return(o.a.createElement("main",{role:"main",className:"container"},o.a.createElement("div",{className:"d-flex align-items-center p-3 my-3 text-white-50 bg-primary rounded shadow-sm"},o.a.createElement("img",{className:"mr-3",src:d.a,alt:"",width:"48",height:"48"}),o.a.createElement("div",{className:"lh-100"},o.a.createElement("h5",{className:"mb-0 text-white lh-100"},"Books"))),a))},m=t(6),v=t(12),f=t(53),b=t(22),E={loading:!1,data:null,error:null},h={FETCH:"FETCH",SUCCESS:"SUCCESS",ERROR:"ERROR",EDIT:"EDIT",DELETE:"DELETE"};function p(e,a){switch(a.type){case h.FETCH:return Object(m.a)({},e,{loading:!0});case h.SUCCESS:return Object(m.a)({},e,{data:a.payload,loading:!1,error:null});case h.ERROR:return Object(m.a)({},e,{error:a.payload,loading:!1});case h.EDIT:var t=a.payload,n=Object(b.a)(e.data),r=n.findIndex((function(e){var a=e.id;return t.id===a}));return n.splice(r,1,Object(m.a)({},n[r],{},t)),Object(m.a)({},e,{data:n});case h.ADD:var o=a.payload;return Object(m.a)({},e,{data:[].concat(Object(b.a)(e.data),[o])});case h.DELETE:var l=a.payload,c=Object(b.a)(e.data),i=c.findIndex((function(e){var a=e.id;return l.id===a}));return c.splice(i,1),Object(m.a)({},e,{data:c});default:throw new Error("Unsupported action type: ".concat(a.type))}}var k=t(25),y=t.n(k),g=t(32),C={fetch:function(e){function a(a){return e.apply(this,arguments)}return a.toString=function(){return e.toString()},a}(function(){var e=Object(g.a)(y.a.mark((function e(a){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){setTimeout((function(){e()}),500)}));case 2:return e.next=4,fetch("".concat("/books-kiosk").concat(a));case 4:return t=e.sent,e.abrupt("return",t.json());case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}())};var j=Object(r.createContext)();var O=function(e){var a=e.children,t=Object(r.useReducer)(p,E),n=Object(v.a)(t,2),l=n[0],c=n[1],i=Object(r.useCallback)((function(){c({type:h.FETCH}),C.fetch("/books.json").then((function(e){c({type:h.SUCCESS,payload:e})}))}),[c]),u=Object(r.useCallback)((function(e){c({type:h.EDIT,payload:e})}),[c]),d=Object(r.useCallback)((function(e){c({type:h.ADD,payload:Object(m.a)({},e,{id:Object(f.a)()})})}),[c]),s=Object(r.useCallback)((function(e){c({type:h.DELETE,payload:e})}),[c]),b=o.a.useMemo((function(){return{state:l,fetchBooks:i,editBook:u,addBook:d,deleteBook:s}}),[l,i,u,d,s]);return o.a.createElement(j.Provider,{value:b},a)},w=t(54);var D=function(e){var a=e.children;return(o.a.createElement("div",{className:"d-block text-right mt-3"},a))};function S(e){var a=e.children;return(o.a.createElement("div",{className:"my-3 p-3 bg-white rounded shadow-sm"},a))}S.Footer=D;var F=S,x=t(13);function T(e){var a=e.book,t=e.onEdit,n=e.onDelete,l=Object(r.useCallback)((function(){t(a)}),[a,t]),c=Object(r.useCallback)((function(){n(a)}),[a,n]);return o.a.createElement("div",{className:"media text-muted pt-3"},o.a.createElement("svg",{className:"bd-placeholder-img mr-2 rounded",width:"50",height:"50",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid slice",focusable:"false",role:"img","aria-label":"Placeholder: 32x32"},o.a.createElement("title",null,"Placeholder"),o.a.createElement("rect",{width:"100%",height:"100%",fill:"#007bff"})),o.a.createElement("div",{className:"media-body pb-3 mb-0 small lh-125 border-bottom border-gray"},o.a.createElement("div",{className:"d-flex justify-content-between"},o.a.createElement("div",null,o.a.createElement("h6",{className:"mb-0"},a.title),o.a.createElement("strong",{className:"d-block text-gray-dark"},a.author),o.a.createElement("small",null,function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-LL-dd";return x.DateTime.fromFormat(e,a).toFormat("LL/dd/yyyy")}(a.date))),o.a.createElement("div",null,o.a.createElement(w.a,{variant:"link",size:"sm",onClick:l},"Edit"),"|",o.a.createElement(w.a,{variant:"link danger",size:"sm",onClick:c},"Delete")))))}T.defaultProps={onEdit:function(){},onDelete:function(){}};var N=T;function I(e){var a=e.books,t=e.onAdd,n=e.onEdit,r=e.onDelete;return(o.a.createElement(F,null,a.map((function(e){return o.a.createElement(N,{key:e.id,book:e,onEdit:n,onDelete:r})})),o.a.createElement(F.Footer,null,o.a.createElement(w.a,{variant:"link",size:"sm",onClick:t},"Add Book"))))}I.defaultProps={onAdd:function(){},onEdit:function(){},onDelete:function(){}};var B=I,L=t(34);t(45);var R=function(){return o.a.createElement("div",{className:"loader"},o.a.createElement("div",{className:"loader-backdrop"}),o.a.createElement("div",{className:"loader-spinner"},o.a.createElement(L.a,{animation:"border",variant:"primary"})))};var V=function(){return o.a.createElement("div",null,"Error")},A={REQUIRED:"This field can't be empty.",DATE:"This field is not valid date."};function P(e){return e?void 0:A.REQUIRED}function H(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"yyyy-LL-dd";return function(a){return a&&!x.DateTime.fromFormat(a,e).isValid?A.DATE:void 0}}var U=function(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];return function(e){for(var t=[],n=0;n<a.length;n+=1){var r=a[n](e);r&&t.push(r)}return t.length?t:void 0}},_=t(20),M=t(8),Y=function(e){return o.a.createElement(M.a.Control,e)},q=t(21),z=function(e){var a=e.value,t=e.dateFormat,n=e.onChange,r=Object(q.a)(e,["value","dateFormat","onChange"]),l=x.DateTime.fromFormat(a||"","yyyy-LL-dd"),c=a;return l.isValid&&(c=l.toFormat(t)),o.a.createElement(M.a.Control,Object.assign({value:c},r,{onChange:function(e){var a=e.target.value,r=x.DateTime.fromFormat(a,t);r.isValid?n(r.toFormat("yyyy-LL-dd")):n(a)}}))};z.defaultProps={value:""};var J=z,Q=function(e){var a=e.active,t=e.visited,n=e.invalid;return(e.submitFailed||t)&&!a&&n},W=function(e){var a=e.name,t=e.label,n=e.helpText,r=e.validate,l=e.control,c=e.controlId,i=e.placeholder,u=e.dateFormat,d={placeholder:i};return u&&Object.assign(d,{dateFormat:u}),o.a.createElement(_.a,{name:a,validate:r},(function(e){var a=e.input,r=e.meta,i=r.error,u=r.submitError,s=!(r.dirtySinceLastSubmit||!u),m=!(s||!Q(r)||!i);return o.a.createElement(M.a.Group,{controlId:c},!!t&&o.a.createElement(M.a.Label,null,t),o.a.createElement(l,Object.assign({isInvalid:m||s},a,d)),!!n&&r.active&&o.a.createElement(M.a.Text,null,n),!!s&&o.a.createElement(M.a.Control.Feedback,{type:"invalid"},u),!!m&&o.a.createElement(M.a.Control.Feedback,{type:"invalid"},function(e){return e?"string"===typeof e||e instanceof String?e:e[0]:""}(i)))}))};W.defaultProps={validate:function(){},control:Y,label:void 0,helpText:void 0,placeholder:void 0,dateFormat:void 0};var G=W;function K(e){var a=e.onSubmit,t=e.validate,n=void 0===t?function(){return{}}:t,r=e.initialValues,l=e.formId,c=e.children;return(o.a.createElement(_.b,{onSubmit:a,validate:n,initialValues:r,render:function(e){var a=e.handleSubmit,t=e.invalid,n=Object(q.a)(e,["handleSubmit","invalid"]);return(o.a.createElement(M.a,{onSubmit:a,noValidate:!0,id:l},c(Object(m.a)({},n,{invalid:t}))))}}))}K.defaultProps={validate:function(){},initialValues:void 0,formId:void 0};var $=K,X={title:n.required,author:n.required,date:n.composeValidators(n.required,n.date())};function Z(e){var a=e.initialValues,t=e.onSubmit;return(o.a.createElement($,{onSubmit:t,initialValues:a,formId:"id_book_form"},(function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(G,{name:"title",label:"Title",placeholder:"Enter book name.",validate:X.title,controlId:"id_title"}),o.a.createElement(G,{name:"author",label:"Author",placeholder:"Enter author name.",validate:X.author,controlId:"id_author"}),o.a.createElement(G,{name:"date",label:"Date",placeholder:"MM/DD/YYYY",validate:X.date,controlId:"id_date",control:J,dateFormat:"LL/dd/yyyy"}),o.a.createElement("input",{type:"submit",style:{display:"none"}}))})))}Z.defaultProps={onSubmit:function(){},initialValues:void 0};var ee=Z,ae=t(52);function te(e){var a=e.show,t=e.data,n=e.onClose,l=e.onSubmit,c=Object(r.useCallback)((function(){document.getElementById("id_book_form").dispatchEvent(new Event("submit"))}),[]),i=Object(r.useCallback)((function(e){l(Object(m.a)({},t,{},e))}),[t,l]);return o.a.createElement(ae.a,{show:a,onHide:n},o.a.createElement(ae.a.Header,{closeButton:!0},o.a.createElement(ae.a.Title,null,"Book Form")),o.a.createElement(ae.a.Body,null,o.a.createElement(ee,{initialValues:t,onSubmit:i})),o.a.createElement(ae.a.Footer,null,o.a.createElement(w.a,{variant:"secondary",onClick:n},"Close"),o.a.createElement(w.a,{variant:"primary",onClick:c},"Save Changes")))}te.defaultProps={onClose:function(){},onSubmit:function(){},show:!1,data:void 0};var ne=te;function re(e){var a=e.show,t=e.message,n=e.data,l=e.onClose,c=e.onDelete,i=Object(r.useCallback)((function(){c(n)}),[n,c]);return o.a.createElement(ae.a,{size:"xs",show:a,onHide:l},o.a.createElement(ae.a.Body,null,t),o.a.createElement(ae.a.Footer,null,o.a.createElement(w.a,{variant:"secondary",onClick:l},"Cancel"),o.a.createElement(w.a,{variant:"danger",onClick:i},"Delete")))}re.defaultProps={onClose:function(){},onDelete:function(){},show:!1,message:"",data:null};var oe=re;var le=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=Object(r.useState)(e),t=Object(v.a)(a,2),n=t[0],o=t[1],l=Object(r.useCallback)((function(){return o((function(e){return!e}))}),[]);return[n,l]};var ce=function(){var e=Object(r.useContext)(j),a=e.state,t=e.fetchBooks,n=e.deleteBook,l=e.addBook,c=e.editBook,i=a.data,u=a.loading,d=a.error,s=le(!1),m=Object(v.a)(s,2),f=m[0],b=m[1],E=le(!1),h=Object(v.a)(E,2),p=h[0],k=h[1],y=Object(r.useState)(null),g=Object(v.a)(y,2),C=g[0],O=g[1],w=Object(r.useCallback)((function(){O(null),k()}),[k]),D=Object(r.useCallback)((function(e){O(e),k()}),[k]),S=Object(r.useCallback)((function(e){O(e),b()}),[b]),F=Object(r.useCallback)((function(e){O(null),n(e),b()}),[b,n]),x=Object(r.useCallback)((function(e){e.id?c(e):l(e),k()}),[k,l,c]);return Object(r.useEffect)((function(){t()}),[t]),u||!i?o.a.createElement(R,null):d?o.a.createElement(V,null):o.a.createElement(o.a.Fragment,null,o.a.createElement(B,{books:i,onAdd:w,onEdit:D,onDelete:S}),o.a.createElement(ne,{data:C,show:p,onClose:k,onSubmit:x}),o.a.createElement(oe,{data:C,message:"Are you sure?",show:f,onClose:b,onDelete:F}))};function ie(){return o.a.createElement(O,null,o.a.createElement(ce,null))}var ue=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(i,null),o.a.createElement(s,null,o.a.createElement(ie,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(ue,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[38,1,2]]]);
//# sourceMappingURL=main.88cb5e00.chunk.js.map